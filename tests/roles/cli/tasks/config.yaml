---
- name: buildah config annotation
  command: buildah config --annotation annotation=test-annotation nginxc

- name: buildah config arch
  command: buildah config --arch x86_64 nginxc

- name: buildah config author
  command: buildah config --author "Guohua Ouyang" nginxc

- name: buildah config cmd
  command: buildah config --cmd "nginx -g 'daemon off;'" nginxc

- name: buildah config createdby
  command: buildah config --created-by "manualcreated" nginxc

- name: buildah config label
  command: buildah config --label label=test-label nginxc

- name: buildah config port
  command: buildah config --port 8001 nginxc

- name: buildah config user
  command: buildah config --user www-data nginxc

- name: buildah config workingdir 
  command: buildah config --workingdir /opt nginxc

- name: buildah config env
  command: buildah config --env foo=bar nginxc

- name: buildah config os
  command: buildah config --os unix nginxc

- name: verify the container after config
  shell: buildah inspect nginxc | grep '{{ item }}'
  with_items:
    - test-annotation
    - x86_64
    - test-label
    - Ouyang
    - daemon off
    - manualcreated
    - 8001
    - www-data
    - opt
    - foo=bar
    - unix
